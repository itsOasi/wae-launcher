name: Docker Image CI

on:
  push:
    branches: [ "dev" ]
  pull_request:
    branches: [ "dev" ]

jobs:

  buildimage: 

    name: Build Docker Image 

    runs-on: ubuntu-latest 

 

    steps: 

      - uses: actions/checkout@v2 

 

      - name: Build Container image 

        run: docker build. --file Dockerfile --tag SDWAGE_NAME 

 

      - name: Log into GitHub Container Registry 

        run: echo "${{ secrets.GITHUB_TOKEN }}" | docker login https://ghcr.io -u ${{ github.actor )) --password-stdin 

 

      - name: Push image to GitHub Container Registry 

        run: | 

          IMAGE_ID=ghcr.io/${{ github.repository_owner }}/$IMAGE_NAME:${{ github.run_id)) 

          docker push $IMAGE_ID 
